/*
 * Simple jQuery plugin to synchronously load and then transition (fade-in/out) a list of images as full screen background-images on a web page.
 * Author: Matt Richards, http://github.com/mattyrichards
 * Licensed under the MIT license
 */
!function(e,a,i,n){var o=function(a,i){this.elem=a,this.$elem=e(a),this.options=i,self=this};o.prototype={defaults:{classNameBottomImage:"image-bottom",classNameTopImage:"image-top",idNameDownloadImage:"image-download",backgrounds:[],imageKey:1,transitionDelay:10,animationSpeed:1e3},init:function(){return this.config=e.extend({},this.defaults,this.options),this.config.backgrounds.length>=2?(this.prepareMarkup(),this.loadNext(),this):(console.warn("BackgroundTransition requires at least 2 background images."),!1)},prepareMarkup:function(){var a=e("<div/>").addClass(this.config.classNameBottomImage+" initial").css("background-image","url("+this.config.backgrounds[0].src+")"),i=e("<div/>").addClass(this.config.classNameTopImage).css("display","none");e(this.elem).prepend(a,i).css("background-image","none")},loadNext:function(){this.config.imageKey==this.config.backgrounds.length&&(this.config.imageKey=0);var a=e.Deferred();e("<img/>").attr("id",this.config.idNameDownloadImage).load(function(){a.resolve()}).attr("src",this.config.backgrounds[this.config.imageKey].src).prependTo("body .backgroundTransition"),a.done(function(){setTimeout(self.replaceImage,1e3*self.config.transitionDelay)})},replaceImage:function(){var a=e("#"+self.config.idNameDownloadImage);e("#"+self.config.idNameDownloadImage).remove(),e("."+self.config.classNameTopImage).css("background-image","url("+a.attr("src")+")"),e("."+self.config.classNameTopImage).fadeIn(self.config.animationSpeed,"swing",function(){e("."+self.config.classNameBottomImage).css("background-image","url("+a.attr("src")+")"),e(this).hide(),self.config.imageKey++,self.loadNext()})}},o.defaults=o.prototype.defaults,e.fn.backgroundTransition=function(e){return this.each(function(){new o(this,e).init()})}}(jQuery,window,document);